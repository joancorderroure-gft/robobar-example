"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.start = void 0;
const util_1 = require("@stryker-mutator/util");
const karma_wrapper_1 = require("../karma-wrapper");
async function start() {
    var _a;
    const configFile = require.resolve('./stryker-karma.conf');
    let config = {
        configFile,
    };
    if ((_a = karma_wrapper_1.karma.config) === null || _a === void 0 ? void 0 : _a.parseConfig) {
        config = await karma_wrapper_1.karma.config.parseConfig(configFile, {}, { promiseConfig: true, throwErrors: true });
    }
    const exitTask = new util_1.Task();
    await new karma_wrapper_1.karma.Server(config, exitTask.resolve).start();
    return {
        exitPromise: exitTask.promise,
    };
}
exports.start = start;
//# sourceMappingURL=karma-starter.js.map